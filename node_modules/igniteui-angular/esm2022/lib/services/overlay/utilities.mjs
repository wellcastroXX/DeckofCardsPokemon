import { cloneValue } from '../../core/utils';
export var HorizontalAlignment;
(function (HorizontalAlignment) {
    HorizontalAlignment[HorizontalAlignment["Left"] = -1] = "Left";
    HorizontalAlignment[HorizontalAlignment["Center"] = -0.5] = "Center";
    HorizontalAlignment[HorizontalAlignment["Right"] = 0] = "Right";
})(HorizontalAlignment || (HorizontalAlignment = {}));
export var VerticalAlignment;
(function (VerticalAlignment) {
    VerticalAlignment[VerticalAlignment["Top"] = -1] = "Top";
    VerticalAlignment[VerticalAlignment["Middle"] = -0.5] = "Middle";
    VerticalAlignment[VerticalAlignment["Bottom"] = 0] = "Bottom";
})(VerticalAlignment || (VerticalAlignment = {}));
/**
 * Defines the possible values of the overlays' position strategy.
 */
export var RelativePositionStrategy;
(function (RelativePositionStrategy) {
    RelativePositionStrategy["Connected"] = "connected";
    RelativePositionStrategy["Auto"] = "auto";
    RelativePositionStrategy["Elastic"] = "elastic";
})(RelativePositionStrategy || (RelativePositionStrategy = {}));
/**
 * Defines the possible positions for the relative overlay settings presets.
 */
export var RelativePosition;
(function (RelativePosition) {
    RelativePosition["Above"] = "above";
    RelativePosition["Below"] = "below";
    RelativePosition["Before"] = "before";
    RelativePosition["After"] = "after";
    RelativePosition["Default"] = "default";
})(RelativePosition || (RelativePosition = {}));
/**
 * Defines the possible positions for the absolute overlay settings presets.
 */
export var AbsolutePosition;
(function (AbsolutePosition) {
    AbsolutePosition["Bottom"] = "bottom";
    AbsolutePosition["Top"] = "top";
    AbsolutePosition["Center"] = "center";
})(AbsolutePosition || (AbsolutePosition = {}));
// TODO: make this interface
export class Point {
    constructor(x, y) {
        this.x = x;
        this.y = y;
    }
}
/** @hidden @internal */
export class Util {
    /**
     * Calculates the rectangle of target for provided overlay settings. Defaults to 0,0,0,0,0,0 rectangle
     * if no target is provided
     *
     * @param settings Overlay settings for which to calculate target rectangle
     */
    static getTargetRect(target) {
        let targetRect = {
            bottom: 0,
            height: 0,
            left: 0,
            right: 0,
            top: 0,
            width: 0
        };
        if (target instanceof HTMLElement) {
            targetRect = target.getBoundingClientRect();
        }
        else if (target instanceof Point) {
            const targetPoint = target;
            targetRect = {
                bottom: targetPoint.y,
                height: 0,
                left: targetPoint.x,
                right: targetPoint.x,
                top: targetPoint.y,
                width: 0
            };
        }
        return targetRect;
    }
    static getViewportRect(document) {
        const width = document.documentElement.clientWidth;
        const height = document.documentElement.clientHeight;
        const scrollPosition = Util.getViewportScrollPosition(document);
        return {
            top: scrollPosition.y,
            left: scrollPosition.x,
            right: scrollPosition.x + width,
            bottom: scrollPosition.y + height,
            width,
            height,
        };
    }
    static getViewportScrollPosition(document) {
        const documentElement = document.documentElement;
        const documentRect = documentElement.getBoundingClientRect();
        const horizontalScrollPosition = -documentRect.left || document.body.scrollLeft || window.scrollX || documentElement.scrollLeft || 0;
        const verticalScrollPosition = -documentRect.top || document.body.scrollTop || window.scrollY || documentElement.scrollTop || 0;
        return new Point(horizontalScrollPosition, verticalScrollPosition);
    }
    static cloneInstance(object) {
        const clonedObj = Object.assign(Object.create(Object.getPrototypeOf(object)), object);
        clonedObj.settings = cloneValue(clonedObj.settings);
        return clonedObj;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbGl0aWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvaWduaXRldWktYW5ndWxhci9zcmMvbGliL3NlcnZpY2VzL292ZXJsYXkvdXRpbGl0aWVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBbUQsVUFBVSxFQUFrQixNQUFNLGtCQUFrQixDQUFDO0FBTS9HLE1BQU0sQ0FBTixJQUFZLG1CQUlYO0FBSkQsV0FBWSxtQkFBbUI7SUFDM0IsOERBQVMsQ0FBQTtJQUNULG9FQUFhLENBQUE7SUFDYiwrREFBUyxDQUFBO0FBQ2IsQ0FBQyxFQUpXLG1CQUFtQixLQUFuQixtQkFBbUIsUUFJOUI7QUFFRCxNQUFNLENBQU4sSUFBWSxpQkFJWDtBQUpELFdBQVksaUJBQWlCO0lBQ3pCLHdEQUFRLENBQUE7SUFDUixnRUFBYSxDQUFBO0lBQ2IsNkRBQVUsQ0FBQTtBQUNkLENBQUMsRUFKVyxpQkFBaUIsS0FBakIsaUJBQWlCLFFBSTVCO0FBRUQ7O0dBRUc7QUFDSCxNQUFNLENBQU4sSUFBWSx3QkFJWDtBQUpELFdBQVksd0JBQXdCO0lBQ2hDLG1EQUF1QixDQUFBO0lBQ3ZCLHlDQUFhLENBQUE7SUFDYiwrQ0FBbUIsQ0FBQTtBQUN2QixDQUFDLEVBSlcsd0JBQXdCLEtBQXhCLHdCQUF3QixRQUluQztBQUVEOztHQUVHO0FBQ0gsTUFBTSxDQUFOLElBQVksZ0JBTVg7QUFORCxXQUFZLGdCQUFnQjtJQUN4QixtQ0FBZSxDQUFBO0lBQ2YsbUNBQWUsQ0FBQTtJQUNmLHFDQUFpQixDQUFBO0lBQ2pCLG1DQUFlLENBQUE7SUFDZix1Q0FBbUIsQ0FBQTtBQUN2QixDQUFDLEVBTlcsZ0JBQWdCLEtBQWhCLGdCQUFnQixRQU0zQjtBQUVEOztHQUVHO0FBQ0gsTUFBTSxDQUFOLElBQVksZ0JBSVg7QUFKRCxXQUFZLGdCQUFnQjtJQUN4QixxQ0FBaUIsQ0FBQTtJQUNqQiwrQkFBVyxDQUFBO0lB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LFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNwRCxPQUFPLFNBQVMsQ0FBQztJQUNyQixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbmltYXRpb25SZWZlcmVuY2VNZXRhZGF0YSB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0IHsgQ29tcG9uZW50UmVmLCBFbGVtZW50UmVmLCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENhbmNlbGFibGVCcm93c2VyRXZlbnRBcmdzLCBDYW5jZWxhYmxlRXZlbnRBcmdzLCBjbG9uZVZhbHVlLCBJQmFzZUV2ZW50QXJncyB9IGZyb20gJy4uLy4uL2NvcmUvdXRpbHMnO1xuaW1wb3J0IHsgSWd4T3ZlcmxheU91dGxldERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvdG9nZ2xlL3RvZ2dsZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQW5pbWF0aW9uUGxheWVyIH0gZnJvbSAnLi4vYW5pbWF0aW9uL2FuaW1hdGlvbic7XG5pbXBvcnQgeyBJUG9zaXRpb25TdHJhdGVneSB9IGZyb20gJy4vcG9zaXRpb24vSVBvc2l0aW9uU3RyYXRlZ3knO1xuaW1wb3J0IHsgSVNjcm9sbFN0cmF0ZWd5IH0gZnJvbSAnLi9zY3JvbGwnO1xuXG5leHBvcnQgZW51bSBIb3Jpem9udGFsQWxpZ25tZW50IHtcbiAgICBMZWZ0ID0gLTEsXG4gICAgQ2VudGVyID0gLTAuNSxcbiAgICBSaWdodCA9IDBcbn1cblxuZXhwb3J0IGVudW0gVmVydGljYWxBbGlnbm1lbnQge1xuICAgIFRvcCA9IC0xLFxuICAgIE1pZGRsZSA9IC0wLjUsXG4gICAgQm90dG9tID0gMFxufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgb3ZlcmxheXMnIHBvc2l0aW9uIHN0cmF0ZWd5LlxuICovXG5leHBvcnQgZW51bSBSZWxhdGl2ZVBvc2l0aW9uU3RyYXRlZ3kge1xuICAgIENvbm5lY3RlZCA9ICdjb25uZWN0ZWQnLFxuICAgIEF1dG8gPSAnYXV0bycsXG4gICAgRWxhc3RpYyA9ICdlbGFzdGljJ1xufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHBvc3NpYmxlIHBvc2l0aW9ucyBmb3IgdGhlIHJlbGF0aXZlIG92ZXJsYXkgc2V0dGluZ3MgcHJlc2V0cy5cbiAqL1xuZXhwb3J0IGVudW0gUmVsYXRpdmVQb3NpdGlvbiB7XG4gICAgQWJvdmUgPSAnYWJvdmUnLFxuICAgIEJlbG93ID0gJ2JlbG93JyxcbiAgICBCZWZvcmUgPSAnYmVmb3JlJyxcbiAgICBBZnRlciA9ICdhZnRlcicsXG4gICAgRGVmYXVsdCA9ICdkZWZhdWx0J1xufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHBvc3NpYmxlIHBvc2l0aW9ucyBmb3IgdGhlIGFic29sdXRlIG92ZXJsYXkgc2V0dGluZ3MgcHJlc2V0cy5cbiAqL1xuZXhwb3J0IGVudW0gQWJzb2x1dGVQb3NpdGlvbiB7XG4gICAgQm90dG9tID0gJ2JvdHRvbScsXG4gICAgVG9wID0gJ3RvcCcsXG4gICAgQ2VudGVyID0gJ2NlbnRlcidcbn1cblxuLy8gVE9ETzogbWFrZSB0aGlzIGludGVyZmFjZVxuZXhwb3J0IGNsYXNzIFBvaW50IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7IH1cbn1cblxuLyoqIEBoaWRkZW4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3V0T2ZWaWV3UG9ydCB7XG4gICAgLyoqIE91dCBvZiB2aWV3IHBvcnQgYXQgVG9wIG9yIExlZnQgKi9cbiAgICBiYWNrOiBudW1iZXI7XG4gICAgLyoqIE91dCBvZiB2aWV3IHBvcnQgYXQgQm90dG9tIG9yIFJpZ2h0ICovXG4gICAgZm9yd2FyZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc2l0aW9uU2V0dGluZ3Mge1xuICAgIC8qKlxuICAgICAqIEF0dGFjaGluZyB0YXJnZXQgZm9yIHRoZSBjb21wb25lbnQgdG8gc2hvd1xuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgaW4gdmVyc2lvbiAxMC4yLjAuIFNldCB0aGUgdGFyZ2V0IHBvaW50L2VsZW1lbnQgaW4gdGhlIG92ZXJsYXkgc2V0dGluZ3MgaW5zdGVhZFxuICAgICAqL1xuICAgIHRhcmdldD86IFBvaW50IHwgSFRNTEVsZW1lbnQ7XG4gICAgLyoqIERpcmVjdGlvbiBpbiB3aGljaCB0aGUgY29tcG9uZW50IHNob3VsZCBzaG93ICovXG4gICAgaG9yaXpvbnRhbERpcmVjdGlvbj86IEhvcml6b250YWxBbGlnbm1lbnQ7XG4gICAgLyoqIERpcmVjdGlvbiBpbiB3aGljaCB0aGUgY29tcG9uZW50IHNob3VsZCBzaG93ICovXG4gICAgdmVydGljYWxEaXJlY3Rpb24/OiBWZXJ0aWNhbEFsaWdubWVudDtcbiAgICAvKiogVGFyZ2V0J3Mgc3RhcnRpbmcgcG9pbnQgKi9cbiAgICBob3Jpem9udGFsU3RhcnRQb2ludD86IEhvcml6b250YWxBbGlnbm1lbnQ7XG4gICAgLyoqIFRhcmdldCdzIHN0YXJ0aW5nIHBvaW50ICovXG4gICAgdmVydGljYWxTdGFydFBvaW50PzogVmVydGljYWxBbGlnbm1lbnQ7XG4gICAgLyoqIEFuaW1hdGlvbiBhcHBsaWVkIHdoaWxlIG92ZXJsYXkgb3BlbnMgKi9cbiAgICBvcGVuQW5pbWF0aW9uPzogQW5pbWF0aW9uUmVmZXJlbmNlTWV0YWRhdGE7XG4gICAgLyoqIEFuaW1hdGlvbiBhcHBsaWVkIHdoaWxlIG92ZXJsYXkgY2xvc2VzICovXG4gICAgY2xvc2VBbmltYXRpb24/OiBBbmltYXRpb25SZWZlcmVuY2VNZXRhZGF0YTtcbiAgICAvKiogVGhlIHNpemUgdXAgdG8gd2hpY2ggZWxlbWVudCBtYXkgc2hyaW5rIHdoZW4gc2hvd24gaW4gZWxhc3RpYyBwb3NpdGlvbiBzdHJhdGVneSAqL1xuICAgIG1pblNpemU/OiBTaXplO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJsYXlTZXR0aW5ncyB7XG4gICAgLyoqIEF0dGFjaGluZyB0YXJnZXQgZm9yIHRoZSBjb21wb25lbnQgdG8gc2hvdyAqL1xuICAgIHRhcmdldD86IFBvaW50IHwgSFRNTEVsZW1lbnQ7XG4gICAgLyoqIFBvc2l0aW9uIHN0cmF0ZWd5IHRvIHVzZSB3aXRoIHRoZXNlIHNldHRpbmdzICovXG4gICAgcG9zaXRpb25TdHJhdGVneT86IElQb3NpdGlvblN0cmF0ZWd5O1xuICAgIC8qKiBTY3JvbGwgc3RyYXRlZ3kgdG8gdXNlIHdpdGggdGhlc2Ugc2V0dGluZ3MgKi9cbiAgICBzY3JvbGxTdHJhdGVneT86IElTY3JvbGxTdHJhdGVneTtcbiAgICAvKiogU2V0IGlmIHRoZSBvdmVybGF5IHNob3VsZCBiZSBpbiBtb2RhbCBtb2RlICovXG4gICAgbW9kYWw/OiBib29sZWFuO1xuICAgIC8qKiBTZXQgaWYgdGhlIG92ZXJsYXkgc2hvdWxkIGNsb3NlIG9uIG91dHNpZGUgY2xpY2sgKi9cbiAgICBjbG9zZU9uT3V0c2lkZUNsaWNrPzogYm9vbGVhbjtcbiAgICAvKiogU2V0IGlmIHRoZSBvdmVybGF5IHNob3VsZCBjbG9zZSB3aGVuIGBFc2NgIGtleSBpcyBwcmVzc2VkICovXG4gICAgY2xvc2VPbkVzY2FwZT86IGJvb2xlYW47XG4gICAgLyoqIFNldCB0aGUgb3V0bGV0IGNvbnRhaW5lciB0byBhdHRhY2ggdGhlIG92ZXJsYXkgdG8gKi9cbiAgICBvdXRsZXQ/OiBJZ3hPdmVybGF5T3V0bGV0RGlyZWN0aXZlIHwgRWxlbWVudFJlZjtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuIEBpbnRlcm5hbFxuICAgICAqIEVsZW1lbnRzIHRvIGJlIGV4Y2x1ZGVkIGZvciBjbG9zZU9uT3V0c2lkZUNsaWNrLlxuICAgICAqIENsaWNraW5nIG9uIHRoZSBlbGVtZW50cyBpbiB0aGlzIGNvbGxlY3Rpb24gd2lsbCBub3QgY2xvc2UgdGhlIG92ZXJsYXkgd2hlbiBjbG9zZU9uT3V0c2lkZUNsaWNrID0gdHJ1ZS5cbiAgICAgKi9cbiAgICBleGNsdWRlRnJvbU91dHNpZGVDbGljaz86IEhUTUxFbGVtZW50W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3ZlcmxheUV2ZW50QXJncyBleHRlbmRzIElCYXNlRXZlbnRBcmdzIHtcbiAgICAvKiogSWQgb2YgdGhlIG92ZXJsYXkgZ2VuZXJhdGVkIHdpdGggYGF0dGFjaCgpYCBtZXRob2QgKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBBdmFpbGFibGUgd2hlbiBgVHlwZTxUPmAgaXMgcHJvdmlkZWQgdG8gdGhlIGBhdHRhY2goKWAgbWV0aG9kIGFuZCBhbGxvd3MgYWNjZXNzIHRvIHRoZSBjcmVhdGVkIENvbXBvbmVudCBpbnN0YW5jZSAqL1xuICAgIGNvbXBvbmVudFJlZj86IENvbXBvbmVudFJlZjxhbnk+O1xuICAgIC8qKiBXaWxsIHByb3ZpZGUgdGhlIGVsZW1lbnRSZWYgb2YgdGhlIG1hcmt1cCB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIGluIHRoZSBvdmVybGF5ICovXG4gICAgZWxlbWVudFJlZj86IEVsZW1lbnRSZWY8YW55PjtcbiAgICAvKiogV2lsbCBwcm92aWRlIHRoZSBvdmVybGF5IHNldHRpbmdzIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYXR0YWNoZWQgKi9cbiAgICBzZXR0aW5ncz86IE92ZXJsYXlTZXR0aW5ncztcbiAgICAvKiogV2lsbCBwcm92aWRlIHRoZSBvcmlnaW5hbCBrZXlib2FyZCBldmVudCBpZiBjbG9zZWQgZnJvbSBFU0Mgb3IgY2xpY2sgKi9cbiAgICBldmVudD86IEV2ZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJsYXlDYW5jZWxhYmxlRXZlbnRBcmdzIGV4dGVuZHMgT3ZlcmxheUV2ZW50QXJncywgQ2FuY2VsYWJsZUV2ZW50QXJncyB7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3ZlcmxheUNsb3NpbmdFdmVudEFyZ3MgZXh0ZW5kcyBPdmVybGF5RXZlbnRBcmdzLCBDYW5jZWxhYmxlQnJvd3NlckV2ZW50QXJncyB7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3ZlcmxheUFuaW1hdGlvbkV2ZW50QXJncyBleHRlbmRzIElCYXNlRXZlbnRBcmdzIHtcbiAgICAvKiogSWQgb2YgdGhlIG92ZXJsYXkgZ2VuZXJhdGVkIHdpdGggYGF0dGFjaCgpYCBtZXRob2QgKi9cbiAgICBpZDogc3RyaW5nO1xuICAgIC8qKiBBbmltYXRpb24gcGxheWVyIHRoYXQgd2lsbCBwbGF5IHRoZSBhbmltYXRpb24gKi9cbiAgICBhbmltYXRpb25QbGF5ZXI6IEFuaW1hdGlvblBsYXllcjtcbiAgICAvKiogVHlwZSBvZiBhbmltYXRpb24gdG8gYmUgcGxheWVkLiBJdCBzaG91bGQgYmUgZWl0aGVyICdvcGVuJyBvciAnY2xvc2UnICovXG4gICAgYW5pbWF0aW9uVHlwZTogJ29wZW4nIHwgJ2Nsb3NlJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaXplIHtcbiAgICAvKiogR2V0cyBvciBzZXRzIHRoZSBob3Jpem9udGFsIGNvbXBvbmVudCBvZiBTaXplICovXG4gICAgd2lkdGg6IG51bWJlcjtcblxuICAgIC8qKiBHZXRzIG9yIHNldHMgdGhlIHZlcnRpY2FsIGNvbXBvbmVudCBvZiBTaXplICovXG4gICAgaGVpZ2h0OiBudW1iZXI7XG59XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJsYXlJbmZvIHtcbiAgICBpZD86IHN0cmluZztcbiAgICB2aXNpYmxlPzogYm9vbGVhbjtcbiAgICBkZXRhY2hlZD86IGJvb2xlYW47XG4gICAgZWxlbWVudFJlZj86IEVsZW1lbnRSZWY7XG4gICAgY29tcG9uZW50UmVmPzogQ29tcG9uZW50UmVmPGFueT47XG4gICAgc2V0dGluZ3M/OiBPdmVybGF5U2V0dGluZ3M7XG4gICAgaW5pdGlhbFNpemU/OiBTaXplO1xuICAgIGhvb2s/OiBIVE1MRWxlbWVudDtcbiAgICBvcGVuQW5pbWF0aW9uUGxheWVyPzogQW5pbWF0aW9uUGxheWVyO1xuICAgIC8vIGNhbGxpbmcgYW5pbWF0aW9uLmRlc3Ryb3kgaW4gZGV0YWNoIGZpcmVzIGFuaW1hdGlvbi5kb25lLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuXG4gICAgLy8gdGhpcyBpcyB3aHkgd2Ugc2hvdWxkIHRyYWNlIGlmIGFuaW1hdGlvbiBldmVyIHN0YXJ0ZWRcbiAgICBvcGVuQW5pbWF0aW9uRGV0YWNoaW5nPzogYm9vbGVhbjtcbiAgICBjbG9zZUFuaW1hdGlvblBsYXllcj86IEFuaW1hdGlvblBsYXllcjtcbiAgICAvLyBjYWxsaW5nIGFuaW1hdGlvbi5kZXN0cm95IGluIGRldGFjaCBmaXJlcyBhbmltYXRpb24uZG9uZS4gVGhpcyBzaG91bGQgbm90IGhhcHBlblxuICAgIC8vIHRoaXMgaXMgd2h5IHdlIHNob3VsZCB0cmFjZSBpZiBhbmltYXRpb24gZXZlciBzdGFydGVkXG4gICAgY2xvc2VBbmltYXRpb25EZXRhY2hpbmc/OiBib29sZWFuO1xuICAgIG5nWm9uZTogTmdab25lO1xuICAgIHRyYW5zZm9ybVg/OiBudW1iZXI7XG4gICAgdHJhbnNmb3JtWT86IG51bWJlcjtcbiAgICBldmVudD86IEV2ZW50O1xuICAgIHdyYXBwZXJFbGVtZW50PzogSFRNTEVsZW1lbnQ7XG59XG5cbi8qKiBAaGlkZGVuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RlZEZpdCB7XG4gICAgY29udGVudEVsZW1lbnRSZWN0PzogUGFydGlhbDxET01SZWN0PjtcbiAgICB0YXJnZXRSZWN0PzogUGFydGlhbDxET01SZWN0PjtcbiAgICB2aWV3UG9ydFJlY3Q/OiBQYXJ0aWFsPERPTVJlY3Q+O1xuICAgIGZpdEhvcml6b250YWw/OiBPdXRPZlZpZXdQb3J0O1xuICAgIGZpdFZlcnRpY2FsPzogT3V0T2ZWaWV3UG9ydDtcbiAgICBsZWZ0PzogbnVtYmVyO1xuICAgIHJpZ2h0PzogbnVtYmVyO1xuICAgIHRvcD86IG51bWJlcjtcbiAgICBib3R0b20/OiBudW1iZXI7XG4gICAgaG9yaXpvbnRhbE9mZnNldD86IG51bWJlcjtcbiAgICB2ZXJ0aWNhbE9mZnNldD86IG51bWJlcjtcbn1cblxuLyoqIEBoaWRkZW4gQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgVXRpbCB7XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgcmVjdGFuZ2xlIG9mIHRhcmdldCBmb3IgcHJvdmlkZWQgb3ZlcmxheSBzZXR0aW5ncy4gRGVmYXVsdHMgdG8gMCwwLDAsMCwwLDAgcmVjdGFuZ2xlXG4gICAgICogaWYgbm8gdGFyZ2V0IGlzIHByb3ZpZGVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgT3ZlcmxheSBzZXR0aW5ncyBmb3Igd2hpY2ggdG8gY2FsY3VsYXRlIHRhcmdldCByZWN0YW5nbGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFRhcmdldFJlY3QodGFyZ2V0PzogUG9pbnQgfCBIVE1MRWxlbWVudCk6IFBhcnRpYWw8RE9NUmVjdD4ge1xuICAgICAgICBsZXQgdGFyZ2V0UmVjdDogUGFydGlhbDxET01SZWN0PiA9IHtcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIHdpZHRoOiAwXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgdGFyZ2V0UmVjdCA9ICh0YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFBvaW50KSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRQb2ludCA9IHRhcmdldCBhcyBQb2ludDtcbiAgICAgICAgICAgIHRhcmdldFJlY3QgPSB7XG4gICAgICAgICAgICAgICAgYm90dG9tOiB0YXJnZXRQb2ludC55LFxuICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0YXJnZXRQb2ludC54LFxuICAgICAgICAgICAgICAgIHJpZ2h0OiB0YXJnZXRQb2ludC54LFxuICAgICAgICAgICAgICAgIHRvcDogdGFyZ2V0UG9pbnQueSxcbiAgICAgICAgICAgICAgICB3aWR0aDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0UmVjdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldFZpZXdwb3J0UmVjdChkb2N1bWVudDogRG9jdW1lbnQpOiBQYXJ0aWFsPERPTVJlY3Q+IHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gVXRpbC5nZXRWaWV3cG9ydFNjcm9sbFBvc2l0aW9uKGRvY3VtZW50KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9wOiBzY3JvbGxQb3NpdGlvbi55LFxuICAgICAgICAgICAgbGVmdDogc2Nyb2xsUG9zaXRpb24ueCxcbiAgICAgICAgICAgIHJpZ2h0OiBzY3JvbGxQb3NpdGlvbi54ICsgd2lkdGgsXG4gICAgICAgICAgICBib3R0b206IHNjcm9sbFBvc2l0aW9uLnkgKyBoZWlnaHQsXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldFZpZXdwb3J0U2Nyb2xsUG9zaXRpb24oZG9jdW1lbnQ6IERvY3VtZW50KTogUG9pbnQge1xuICAgICAgICBjb25zdCBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50UmVjdCA9IGRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICBjb25zdCBob3Jpem9udGFsU2Nyb2xsUG9zaXRpb24gPVxuICAgICAgICAgICAgLWRvY3VtZW50UmVjdC5sZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCB3aW5kb3cuc2Nyb2xsWCB8fCBkb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCAwO1xuICAgICAgICBjb25zdCB2ZXJ0aWNhbFNjcm9sbFBvc2l0aW9uID0gLWRvY3VtZW50UmVjdC50b3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgd2luZG93LnNjcm9sbFkgfHwgZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCAwO1xuXG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQoaG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uLCB2ZXJ0aWNhbFNjcm9sbFBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNsb25lSW5zdGFuY2Uob2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGNsb25lZE9iaiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KSksIG9iamVjdCk7XG4gICAgICAgIGNsb25lZE9iai5zZXR0aW5ncyA9IGNsb25lVmFsdWUoY2xvbmVkT2JqLnNldHRpbmdzKTtcbiAgICAgICAgcmV0dXJuIGNsb25lZE9iajtcbiAgICB9XG59XG4iXX0=